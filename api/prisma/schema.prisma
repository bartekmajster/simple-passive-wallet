generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model User {
  uuid         String         @id @default(uuid())
  createdAt    DateTime       @default(now())
  email        String         @unique
  name         String
  password     String
  rtHash       String?
  cashAccounts CashAccounts[]
  portfolios   Portfolios[]
}

model CashAccounts {
  uuid     String   @id @default(uuid())
  name     String
  balance  Float    @default(0)
  currency Currency
  user     User     @relation(fields: [userUuid], references: [uuid])
  userUuid String

  @@unique([userUuid, uuid])
}

model Portfolios {
  uuid        String        @id @default(uuid())
  name        String
  instruments Instruments[]
  user        User          @relation(fields: [userUuid], references: [uuid])
  userUuid    String

  @@unique([userUuid, uuid])
}

model Instruments {
  uuid          String     @id @default(uuid())
  name          String
  portfolio     Portfolios @relation(fields: [portfolioUuid], references: [uuid])
  portfolioUuid String

  @@unique([portfolioUuid, uuid])
}

enum Currency {
  CHF
  EUR
  GBP
  USD
  PLN
}
