import{ab as v,s as E,d as i,i as u,j as o,I as P,o as x,B as f,ac as N,ad as _,H as O,f as s,T as g,af as R,ae as j,L as H}from"./index.3015572c.js";import{c as b,e as L,a as z,b as D,u as M,f as V,o as W}from"./array.0446e027.js";import{u as $}from"./index.a851817c.js";import{E as k}from"./EmptyList.5e712e19.js";import{u as S}from"./useTranslation.968c7373.js";import{T as B}from"./Trans.4b7e2a07.js";import"./FullscreenClear.8586ac29.js";import"./useStateMachine.aa644696.js";const G=b().shape({portfolios:L().of(b({name:z().required("\u200E").min(2,"\u200E")})).min(1).max(v,"\u200E")}),U=E.div.withConfig({displayName:"FieldsWrapper",componentId:"sc-1jx0130-0"})(["overflow-y:auto;max-height:250px;> div:not(:last-child){margin-bottom:",";}"],({theme:t})=>t.spacing.small),X=({register:t,errors:n,index:e,remove:r})=>{const{t:l}=S(),d=D({register:t,name:`portfolios.${e}.name`,errors:n}),c=()=>r(e);return i(u.exports.Row,{children:[o(P,{placeholder:l("add.portfolios.input.placeholder"),flexGrow:1,...d}),o(x,{spread:"tiny"}),o(f,{borderRadius:"secondary",color:"secondary",onClick:c,boxShadow:"none",children:o(N,{})})]})},q=()=>{const{t}=S(),{updateState:n,actions:e}=$(),r=async p=>{console.log(p),await new Promise(m=>{setTimeout(m,3e3)}),n(e.CHANGE_TO_ADD_INSTRUMENT)},l={portfolios:[]},{register:d,handleSubmit:c,formState:{errors:A,isSubmitting:h,isValid:C,isDirty:T},control:F}=M({defaultValues:l,resolver:W(G),mode:"onChange"}),{fields:a,append:w,remove:I}=V({control:F,name:"portfolios"}),y=()=>w({name:""});return o(_.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:i(u.exports.Column,{children:[o(O,{textAlign:"center",children:t("add.portfolios.title")}),o(s,{space:"small"}),o(g,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:o(B,{i18nKey:"add.portfolios.description",components:{bold:o(g,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",fontWeight:"700"})}})}),o(s,{space:"large"}),o("form",{onSubmit:c(r),noValidate:!0,children:i(u.exports.Column,{children:[a.length===0?o(k,{handleAppend:y,i18n:{title:t("add.portfolios.empty"),button:t("add.portfolios.button.add")}}):null,o(U,{children:a.map((p,m)=>o(X,{index:m,register:d,errors:A,remove:I},p.id))}),o(s,{space:"tiny"}),a.length>0&&a.length<R?i(f,{color:"secondary",onClick:y,children:[t("add.portfolios.button.add")," ",o(x,{spread:"tiny"})," ",o(j,{})]}):null,o(s,{space:"large"}),o(f,{size:"large",type:"submit",disabled:h||!C||!T,width:"100%",children:h?o(H,{color:"white"}):t("add.cash.accounts.submit")})]})})]})})};q.displayName="IntroductionAddPortfoliosForm";export{q as AddPortfoliosForm};
