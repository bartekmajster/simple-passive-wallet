import{ad as v,s as E,a as b,e as n,k as u,j as o,I as P,p as S,B as f,ae as N,af as _,H as O,g as s,T as y,ah as R,ag as j,L as H}from"./index.531bdd1d.js";import{c as x,e as L,a as k,b as z,u as D,f as M,o as V}from"./array.ed45da59.js";import{u as W}from"./index.0b6ed134.js";import{E as $}from"./EmptyList.7040aece.js";import{T as B}from"./Trans.8d667a6a.js";import"./FullscreenClear.16d1157a.js";import"./useStateMachine.0f8e40c2.js";const G=x().shape({portfolios:L().of(x({name:k().required("\u200E").min(2,"\u200E")})).min(1).max(v,"\u200E")}),U=E.div.withConfig({displayName:"FieldsWrapper",componentId:"sc-1jx0130-0"})(["overflow-y:auto;max-height:250px;> div:not(:last-child){margin-bottom:",";}"],({theme:e})=>e.spacing.small),X=({register:e,errors:i,index:t,remove:r})=>{const{t:l}=b(),d=z({register:e,name:`portfolios.${t}.name`,errors:i}),c=()=>r(t);return n(u.exports.Row,{children:[o(P,{placeholder:l("add.portfolios.input.placeholder"),flexGrow:1,...d}),o(S,{spread:"tiny"}),o(f,{borderRadius:"secondary",color:"secondary",onClick:c,boxShadow:"none",children:o(N,{})})]})},q=()=>{const{t:e}=b(),{updateState:i,actions:t}=W(),r=async p=>{console.log(p),await new Promise(m=>{setTimeout(m,3e3)}),i(t.CHANGE_TO_ADD_INSTRUMENT)},l={portfolios:[]},{register:d,handleSubmit:c,formState:{errors:A,isSubmitting:h,isValid:C,isDirty:T},control:F}=D({defaultValues:l,resolver:V(G),mode:"onChange"}),{fields:a,append:w,remove:I}=M({control:F,name:"portfolios"}),g=()=>w({name:""});return o(_.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:n(u.exports.Column,{children:[o(O,{textAlign:"center",children:e("add.portfolios.title")}),o(s,{space:"small"}),o(y,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:o(B,{i18nKey:"add.portfolios.description",components:{bold:o(y,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",fontWeight:"700"})}})}),o(s,{space:"large"}),o("form",{onSubmit:c(r),noValidate:!0,children:n(u.exports.Column,{children:[a.length===0?o($,{handleAppend:g,i18n:{title:e("add.portfolios.empty"),button:e("add.portfolios.button.add")}}):null,o(U,{children:a.map((p,m)=>o(X,{index:m,register:d,errors:A,remove:I},p.id))}),o(s,{space:"tiny"}),a.length>0&&a.length<R?n(f,{color:"secondary",onClick:g,children:[e("add.portfolios.button.add")," ",o(S,{spread:"tiny"})," ",o(j,{})]}):null,o(s,{space:"large"}),o(f,{size:"large",type:"submit",disabled:h||!C||!T,width:"100%",children:h?o(H,{color:"white"}):e("add.cash.accounts.submit")})]})})]})})};q.displayName="IntroductionAddPortfoliosForm";export{q as AddPortfoliosForm};
