import{c as w,e as L,a as E,b as D,u as H,f as _,o as V}from"./array.a5e78e3f.js";import{aa as T,s as $,b as o,h as d,j as e,T as x,e as r,B as u,n as m,ab as v,d as z,I as B,m as G,ac as W,ad as j,H as k,L as M}from"./index.dd455b61.js";import{u as q}from"./index.da1562d0.js";import{u as A}from"./useTranslation.6502199e.js";import{u as O}from"./useSelect.f46688c8.js";import{T as K}from"./Trans.dd365b18.js";import"./FullscreenClear.99a7d441.js";import"./useStateMachine.9f14608d.js";const X=w().shape({accounts:L().of(w({name:E().required("\u200E").min(2,"\u200E"),currency:E().required()})).min(1).max(T,"\u200E")}),Y=$.div.withConfig({displayName:"FieldsWrapper",componentId:"sc-15wozii-0"})(["overflow-y:auto;max-height:250px;> div:not(:last-child){margin-bottom:",";}"],({theme:t})=>t.spacing.small),I=({handleAppend:t})=>{const{t:a}=A();return o(d.exports.Column,{alignItems:"center",children:[e(x,{textAlign:"center",fontWeight:"700",children:a("add.cash.accounts.empty")}),e(r,{space:"tiny"}),o(u,{color:"secondary",onClick:t,children:[a("add.cash.accounts.button.add")," ",e(m,{spread:"tiny"})," ",e(v,{})]})]})};I.displayName="AddCashAccountsEmptyList";const J="CHF",Q="EUR",Z="GBP",ee="PLN",te="USD",ae=[J,Q,Z,te,ee],ne=({register:t,errors:a,index:s,values:p,remove:h})=>{const{t:c}=A(),y=D({register:t,name:`accounts.${s}.name`,errors:a}),g=O({register:t,name:`accounts.${s}.currency`,errors:a,defaultValues:p}),i=z.exports.useMemo(()=>ae.map(n=>({label:c(`currency.${n}`),value:n})),[c]),f=({value:n})=>n,C=()=>h(s);return o(d.exports.Row,{children:[e(B,{placeholder:c("common.input.name.placeholder"),flexGrow:1,...y}),e(m,{spread:"tiny"}),e(G,{width:"130px",options:i,customLabel:f,...g}),e(m,{spread:"tiny"}),e(u,{borderRadius:"secondary",color:"secondary",onClick:C,boxShadow:"none",children:e(W,{})})]})},oe=()=>{const{t}=A(),{updateState:a,actions:s}=q(),p=async S=>{console.log(S),await new Promise(b=>{setTimeout(b,3e3)}),a(s.CHANGE_TO_ADD_INSTRUMENT)},h={accounts:[]},{register:c,handleSubmit:y,formState:{errors:g,isSubmitting:i,isValid:f,isDirty:C},control:n,getValues:N}=H({defaultValues:h,resolver:V(X),mode:"onChange"}),{fields:l,append:R,remove:P}=_({control:n,name:"accounts"}),U=N(),F=()=>R({name:"",currency:"USD"});return e(j.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(d.exports.Column,{children:[e(k,{textAlign:"center",children:t("add.cash.accounts.title")}),e(r,{space:"small"}),e(x,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:e(K,{i18nKey:"add.cash.accounts.description",components:{bold:e(x,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",fontWeight:"700"})}})}),e(r,{space:"large"}),e("form",{onSubmit:y(p),noValidate:!0,children:o(d.exports.Column,{children:[l.length===0?e(I,{handleAppend:F}):null,e(Y,{children:l.map((S,b)=>e(ne,{index:b,register:c,errors:g,values:U,remove:P},S.id))}),e(r,{space:"tiny"}),l.length>0&&l.length<T?o(u,{color:"secondary",onClick:F,children:[t("add.cash.accounts.button.add")," ",e(m,{spread:"tiny"})," ",e(v,{})]}):null,e(r,{space:"large"}),e(u,{size:"large",type:"submit",disabled:i||!f||!C,width:"100%",children:i?e(M,{color:"white"}):t("add.cash.accounts.submit")})]})})]})})};oe.displayName="IntroductionAddCashAccountsForm";export{oe as AddCashAccountsForm};
