import{u as T,j as e,a2 as q,d as o,h as l,H as w,S as n,T as I,I as m,a0 as F,a3 as j,B as k,L as N,e as _,$,X as A}from"./index.cb11aff0.js";import{c as E,a as d,h as H,i as z,j as B,u as L,b as p,o as O}from"./array.bea738c1.js";import{u as V}from"./index.40d81c99.js";import{u as G}from"./useSelect.f14564d8.js";import"./FullscreenClear.10435a7f.js";import"./useStateMachine.f31aa605.js";const M=[{value:"cash",label:"selectors.instruments.cash"},{value:"saving-accounts",label:"selectors.instruments.saving-accounts"},{value:"deposits",label:"selectors.instruments.deposits"},{value:"stocks",label:"selectors.instruments.stocks"},{value:"bonds",label:"selectors.instruments.bonds"},{value:"commodies",label:"selectors.instruments.commodies"},{value:"crypto",label:"selectors.instruments.crypto"},{value:"others",label:"selectors.instruments.others"}],U=E().shape({instrumentName:d().required("add.instrument.name.required"),instrumentType:d().nullable().required("add.instrument.type.required"),instrumentRebalancing:H(),instrumentPercentage:z().notRequired().when("instrumentRebalancing",{is:t=>t,then:B().typeError("add.instrument.percentage.required").min(1,"add.instrument.percentage.error.range.min").max(100,"add.instrument.percentage.error.range.max").required("add.instrument.percentage.required")})}),Y=()=>{const{t}=T(),g=M.map(({label:s,...i})=>({label:t(s),...i})),{updateState:b,actions:h}=V(),y=async s=>{console.log(s),await new Promise(i=>{setTimeout(i,3e3)}),b(h.CHANGE_TO_FORM_SUCCESS)},c={instrumentName:"",instrumentType:null,instrumentRebalancing:!0,instrumentPercentage:void 0},{register:a,handleSubmit:x,formState:{errors:r,isSubmitting:u},watch:S,resetField:v}=L({defaultValues:c,resolver:O(U)}),f=p({register:a,name:"instrumentName",errors:r}),C=G({register:a,name:"instrumentType",defaultValues:c,errors:r}),P=s=>{s.target.checked||v("instrumentPercentage")},R=p({register:a,name:"instrumentPercentage",errors:r});return e(q.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(l.exports.Column,{children:[e(w,{textAlign:"center",children:t("add.instrument.title")}),e(n,{space:"small"}),e(I,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:t("add.instrument.description")}),e(n,{space:"large"}),e("form",{onSubmit:x(y),noValidate:!0,children:o(l.exports.Column,{children:[e(m,{placeholder:t("add.instrument.name.placeholder"),...f}),e(n,{}),e(F,{options:g,placeholder:t("add.instrument.type.placeholder"),...C}),e(n,{}),e(j,{label:t("add.instrument.take_into_rebalance.label"),...a("instrumentRebalancing",{onChange:P})}),e(n,{}),e(m,{placeholder:t("add.instrument.percentage.placeholder"),type:"number",unit:"percentage",min:"0",max:"100",disabled:!S("instrumentRebalancing"),...R}),e(n,{space:"large"}),e(l.exports.Row,{justifyContent:"flex-end",children:e(k,{size:"large",type:"submit",color:"secondary",disabled:u,width:"100%",children:u?e(N,{color:"white"}):o(_.exports.Fragment,{children:[e($,{}),e(A,{spread:"tiny"}),t("add.instrument.button.submit.first")]})})})]})})]})})};export{Y as AddInstrumentForm};
