import{j as e,ae as T,d as o,i as l,H as q,f as n,T as w,I as m,n as I,af as F,B as j,L as k,a as N,ac as _,o as A}from"./index.018d6ffe.js";import{c as $,a as d,h as E,i as H,j as z,u as B,b as p,o as L}from"./array.2aa3ac51.js";import{u as O}from"./index.ebec2f42.js";import{u as V}from"./useSelect.0dd943db.js";import{u as G}from"./useTranslation.284ee976.js";import"./FullscreenClear.c02202fe.js";import"./useStateMachine.6c1dad9f.js";const M=[{value:"cash",label:"selectors.instruments.cash"},{value:"saving-accounts",label:"selectors.instruments.saving-accounts"},{value:"deposits",label:"selectors.instruments.deposits"},{value:"stocks",label:"selectors.instruments.stocks"},{value:"bonds",label:"selectors.instruments.bonds"},{value:"commodies",label:"selectors.instruments.commodies"},{value:"crypto",label:"selectors.instruments.crypto"},{value:"others",label:"selectors.instruments.others"}],U=$().shape({instrumentName:d().required("add.instrument.name.required"),instrumentType:d().nullable().required("add.instrument.type.required"),instrumentRebalancing:E(),instrumentPercentage:H().notRequired().when("instrumentRebalancing",{is:t=>t,then:z().typeError("add.instrument.percentage.required").min(1,"add.instrument.percentage.error.range.min").max(100,"add.instrument.percentage.error.range.max").required("add.instrument.percentage.required")})}),Z=()=>{const{t}=G(),g=M.map(({label:a,...i})=>({label:t(a),...i})),{updateState:b,actions:h}=O(),y=async a=>{console.log(a),await new Promise(i=>{setTimeout(i,3e3)}),b(h.CHANGE_TO_FORM_SUCCESS)},c={instrumentName:"",instrumentType:null,instrumentRebalancing:!0,instrumentPercentage:void 0},{register:s,handleSubmit:x,formState:{errors:r,isSubmitting:u},watch:f,resetField:S}=B({defaultValues:c,resolver:L(U)}),v=p({register:s,name:"instrumentName",errors:r}),C=V({register:s,name:"instrumentType",defaultValues:c,errors:r}),P=a=>{a.target.checked||S("instrumentPercentage")},R=p({register:s,name:"instrumentPercentage",errors:r});return e(T.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(l.exports.Column,{children:[e(q,{textAlign:"center",children:t("add.instrument.title")}),e(n,{space:"small"}),e(w,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:t("add.instrument.description")}),e(n,{space:"large"}),e("form",{onSubmit:x(y),noValidate:!0,children:o(l.exports.Column,{children:[e(m,{placeholder:t("add.instrument.name.placeholder"),...v}),e(n,{}),e(I,{options:g,placeholder:t("add.instrument.type.placeholder"),...C}),e(n,{}),e(F,{label:t("add.instrument.take_into_rebalance.label"),...s("instrumentRebalancing",{onChange:P})}),e(n,{}),e(m,{placeholder:t("add.instrument.percentage.placeholder"),type:"number",unit:"percentage",min:"0",max:"100",disabled:!f("instrumentRebalancing"),...R}),e(n,{space:"large"}),e(l.exports.Row,{justifyContent:"flex-end",children:e(j,{size:"large",type:"submit",color:"secondary",disabled:u,width:"100%",children:u?e(k,{color:"white"}):o(N.exports.Fragment,{children:[e(_,{}),e(A,{spread:"tiny"}),t("add.instrument.button.submit.first")]})})})]})})]})})};export{Z as AddInstrumentForm};
