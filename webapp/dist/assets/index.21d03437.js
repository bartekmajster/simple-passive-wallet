import{a as T,j as e,af as q,e as o,k as l,H as w,g as n,T as I,I as m,o as k,ai as F,B as j,L as N,b as _,ag as A,p as $}from"./index.531bdd1d.js";import{c as E,a as d,h as H,i as z,j as B,u as L,b as p,o as O}from"./array.ed45da59.js";import{u as V}from"./index.0b6ed134.js";import{u as G}from"./useSelect.841a0d63.js";import"./FullscreenClear.16d1157a.js";import"./useStateMachine.0f8e40c2.js";const M=[{value:"cash",label:"selectors.instruments.cash"},{value:"saving-accounts",label:"selectors.instruments.saving-accounts"},{value:"deposits",label:"selectors.instruments.deposits"},{value:"stocks",label:"selectors.instruments.stocks"},{value:"bonds",label:"selectors.instruments.bonds"},{value:"commodies",label:"selectors.instruments.commodies"},{value:"crypto",label:"selectors.instruments.crypto"},{value:"others",label:"selectors.instruments.others"}],U=E().shape({instrumentName:d().required("add.instrument.name.required"),instrumentType:d().nullable().required("add.instrument.type.required"),instrumentRebalancing:H(),instrumentPercentage:z().notRequired().when("instrumentRebalancing",{is:t=>t,then:B().typeError("add.instrument.percentage.required").min(1,"add.instrument.percentage.error.range.min").max(100,"add.instrument.percentage.error.range.max").required("add.instrument.percentage.required")})}),Y=()=>{const{t}=T(),g=M.map(({label:a,...i})=>({label:t(a),...i})),{updateState:b,actions:h}=V(),y=async a=>{console.log(a),await new Promise(i=>{setTimeout(i,3e3)}),b(h.CHANGE_TO_FORM_SUCCESS)},c={instrumentName:"",instrumentType:null,instrumentRebalancing:!0,instrumentPercentage:void 0},{register:s,handleSubmit:x,formState:{errors:r,isSubmitting:u},watch:S,resetField:f}=L({defaultValues:c,resolver:O(U)}),v=p({register:s,name:"instrumentName",errors:r}),C=G({register:s,name:"instrumentType",defaultValues:c,errors:r}),P=a=>{a.target.checked||f("instrumentPercentage")},R=p({register:s,name:"instrumentPercentage",errors:r});return e(q.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(l.exports.Column,{children:[e(w,{textAlign:"center",children:t("add.instrument.title")}),e(n,{space:"small"}),e(I,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:t("add.instrument.description")}),e(n,{space:"large"}),e("form",{onSubmit:x(y),noValidate:!0,children:o(l.exports.Column,{children:[e(m,{placeholder:t("add.instrument.name.placeholder"),...v}),e(n,{}),e(k,{options:g,placeholder:t("add.instrument.type.placeholder"),...C}),e(n,{}),e(F,{label:t("add.instrument.take_into_rebalance.label"),...s("instrumentRebalancing",{onChange:P})}),e(n,{}),e(m,{placeholder:t("add.instrument.percentage.placeholder"),type:"number",unit:"percentage",min:"0",max:"100",disabled:!S("instrumentRebalancing"),...R}),e(n,{space:"large"}),e(l.exports.Row,{justifyContent:"flex-end",children:e(j,{size:"large",type:"submit",color:"secondary",disabled:u,width:"100%",children:u?e(N,{color:"white"}):o(_.exports.Fragment,{children:[e(A,{}),e($,{spread:"tiny"}),t("add.instrument.button.submit.first")]})})})]})})]})})};export{Y as AddInstrumentForm};
