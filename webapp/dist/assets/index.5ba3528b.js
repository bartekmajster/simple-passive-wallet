import{j as e,ad as T,b as o,h as l,H as q,e as n,T as w,I as m,m as I,ae as F,B as j,L as k,d as N,ab as _,n as A}from"./index.dd455b61.js";import{c as $,a as d,h as E,i as H,j as z,u as B,b as p,o as L}from"./array.a5e78e3f.js";import{u as O}from"./index.da1562d0.js";import{u as V}from"./useSelect.f46688c8.js";import{u as G}from"./useTranslation.6502199e.js";import"./FullscreenClear.99a7d441.js";import"./useStateMachine.9f14608d.js";const M=[{value:"cash",label:"selectors.instruments.cash"},{value:"saving-accounts",label:"selectors.instruments.saving-accounts"},{value:"deposits",label:"selectors.instruments.deposits"},{value:"stocks",label:"selectors.instruments.stocks"},{value:"bonds",label:"selectors.instruments.bonds"},{value:"commodies",label:"selectors.instruments.commodies"},{value:"crypto",label:"selectors.instruments.crypto"},{value:"others",label:"selectors.instruments.others"}],U=$().shape({instrumentName:d().required("add.instrument.name.required"),instrumentType:d().nullable().required("add.instrument.type.required"),instrumentRebalancing:E(),instrumentPercentage:H().notRequired().when("instrumentRebalancing",{is:t=>t,then:z().typeError("add.instrument.percentage.required").min(1,"add.instrument.percentage.error.range.min").max(100,"add.instrument.percentage.error.range.max").required("add.instrument.percentage.required")})}),Z=()=>{const{t}=G(),b=M.map(({label:s,...i})=>({label:t(s),...i})),{updateState:g,actions:h}=O(),y=async s=>{console.log(s),await new Promise(i=>{setTimeout(i,3e3)}),g(h.CHANGE_TO_FORM_SUCCESS)},c={instrumentName:"",instrumentType:null,instrumentRebalancing:!0,instrumentPercentage:void 0},{register:a,handleSubmit:x,formState:{errors:r,isSubmitting:u},watch:S,resetField:f}=B({defaultValues:c,resolver:L(U)}),v=p({register:a,name:"instrumentName",errors:r}),C=V({register:a,name:"instrumentType",defaultValues:c,errors:r}),P=s=>{s.target.checked||f("instrumentPercentage")},R=p({register:a,name:"instrumentPercentage",errors:r});return e(T.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(l.exports.Column,{children:[e(q,{textAlign:"center",children:t("add.instrument.title")}),e(n,{space:"small"}),e(w,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:t("add.instrument.description")}),e(n,{space:"large"}),e("form",{onSubmit:x(y),noValidate:!0,children:o(l.exports.Column,{children:[e(m,{placeholder:t("add.instrument.name.placeholder"),...v}),e(n,{}),e(I,{options:b,placeholder:t("add.instrument.type.placeholder"),...C}),e(n,{}),e(F,{label:t("add.instrument.take_into_rebalance.label"),...a("instrumentRebalancing",{onChange:P})}),e(n,{}),e(m,{placeholder:t("add.instrument.percentage.placeholder"),type:"number",unit:"percentage",min:"0",max:"100",disabled:!S("instrumentRebalancing"),...R}),e(n,{space:"large"}),e(l.exports.Row,{justifyContent:"flex-end",children:e(j,{size:"large",type:"submit",color:"secondary",disabled:u,width:"100%",children:u?e(k,{color:"white"}):o(N.exports.Fragment,{children:[e(_,{}),e(A,{spread:"tiny"}),t("add.instrument.button.submit.first")]})})})]})})]})})};export{Z as AddInstrumentForm};
