import{c as A,e as L,a as F,b as N,u as U,f as D,o as H}from"./array.f9feca11.js";import{ab as v,s as _,a as O,d as l,i as g,j as e,I as V,o as C,n as $,B as b,ac as z,ad as B,H as G,f as i,T as w,ae as j,L as W}from"./index.e27de611.js";import{u as k}from"./index.d4451fdd.js";import{E as q}from"./EmptyList.3dfb0f17.js";import{u as M}from"./useSelect.a5b3a34c.js";import{u as E}from"./useTranslation.40c97f66.js";import{T as K}from"./Trans.a3d59755.js";import"./FullscreenClear.5186142d.js";import"./useStateMachine.3b3a9056.js";const X=A().shape({accounts:L().of(A({name:F().required("\u200E").min(2,"\u200E"),currency:F().required()})).min(1).max(v,"\u200E")}),Y=_.div.withConfig({displayName:"FieldsWrapper",componentId:"sc-15wozii-0"})(["overflow-y:auto;max-height:250px;> div:not(:last-child){margin-bottom:",";}"],({theme:t})=>t.spacing.small),J="CHF",Q="EUR",Z="GBP",ee="PLN",te="USD",ae=[J,Q,Z,te,ee],oe=({register:t,errors:n,index:o,values:d,remove:u})=>{const{t:s}=E(),m=N({register:t,name:`accounts.${o}.name`,errors:n}),p=M({register:t,name:`accounts.${o}.currency`,errors:n,defaultValues:d}),c=O.exports.useMemo(()=>ae.map(a=>({label:s(`currency.${a}`),value:a})),[s]),h=({value:a})=>a,y=()=>u(o);return l(g.exports.Row,{children:[e(V,{placeholder:s("common.input.name.placeholder"),flexGrow:1,...m}),e(C,{spread:"tiny"}),e($,{width:"130px",options:c,customLabel:h,...p}),e(C,{spread:"tiny"}),e(b,{borderRadius:"secondary",color:"secondary",onClick:y,boxShadow:"none",children:e(z,{})})]})},se=()=>{const{t}=E(),{updateState:n,actions:o}=k(),d=async f=>{console.log(f),await new Promise(S=>{setTimeout(S,3e3)}),n(o.CHANGE_TO_ADD_PORTFOLIOS)},u={accounts:[]},{register:s,handleSubmit:m,formState:{errors:p,isSubmitting:c,isValid:h,isDirty:y},control:a,getValues:R}=U({defaultValues:u,resolver:H(X),mode:"onChange"}),{fields:r,append:T,remove:I}=D({control:a,name:"accounts"}),P=R(),x=()=>T({name:"",currency:"USD"});return e(B.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:l(g.exports.Column,{children:[e(G,{textAlign:"center",children:t("add.cash.accounts.title")}),e(i,{space:"small"}),e(w,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:e(K,{i18nKey:"add.cash.accounts.description",components:{bold:e(w,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",fontWeight:"700"})}})}),e(i,{space:"large"}),e("form",{onSubmit:m(d),noValidate:!0,children:l(g.exports.Column,{children:[r.length===0?e(q,{handleAppend:x,i18n:{title:t("add.cash.accounts.empty"),button:t("add.cash.accounts.button.add")}}):null,e(Y,{children:r.map((f,S)=>e(oe,{index:S,register:s,errors:p,values:P,remove:I},f.id))}),e(i,{space:"tiny"}),r.length>0&&r.length<v?l(b,{color:"secondary",onClick:x,children:[t("add.cash.accounts.button.add")," ",e(C,{spread:"tiny"})," ",e(j,{})]}):null,e(i,{space:"large"}),e(b,{size:"large",type:"submit",disabled:c||!h||!y,width:"100%",children:c?e(W,{color:"white"}):t("add.cash.accounts.submit")})]})})]})})};se.displayName="IntroductionAddCashAccountsForm";export{se as AddCashAccountsForm};
