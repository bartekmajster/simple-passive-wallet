import{c as w,e as L,a as E,b as D,u as H,f as _,o as $}from"./array.bea738c1.js";import{Z as T,s as V,u as b,d as o,h as d,j as e,T as A,S as r,B as u,X as m,$ as v,e as z,I as B,a0 as G,a1 as W,a2 as j,H as k,L as M}from"./index.cb11aff0.js";import{u as q}from"./index.40d81c99.js";import{u as O}from"./useSelect.f14564d8.js";import{T as X}from"./Trans.b2f228f0.js";import"./FullscreenClear.10435a7f.js";import"./useStateMachine.f31aa605.js";const K=w().shape({accounts:L().of(w({name:E().required("\u200E").min(2,"\u200E"),currency:E().required()})).min(1).max(T,"\u200E")}),Y=V.div.withConfig({displayName:"FieldsWrapper",componentId:"sc-15wozii-0"})(["overflow-y:auto;max-height:250px;> div:not(:last-child){margin-bottom:",";}"],({theme:t})=>t.spacing.small),I=({handleAppend:t})=>{const{t:a}=b();return o(d.exports.Column,{alignItems:"center",children:[e(A,{textAlign:"center",fontWeight:"700",children:a("add.cash.accounts.empty")}),e(r,{space:"tiny"}),o(u,{color:"secondary",onClick:t,children:[a("add.cash.accounts.button.add")," ",e(m,{spread:"tiny"})," ",e(v,{})]})]})};I.displayName="AddCashAccountsEmptyList";const Z="CHF",J="EUR",Q="GBP",ee="PLN",te="USD",ae=[Z,J,Q,te,ee],ne=({register:t,errors:a,index:s,values:p,remove:h})=>{const{t:c}=b(),y=D({register:t,name:`accounts.${s}.name`,errors:a}),g=O({register:t,name:`accounts.${s}.currency`,errors:a,defaultValues:p}),i=z.exports.useMemo(()=>ae.map(n=>({label:c(`currency.${n}`),value:n})),[c]),S=({value:n})=>n,C=()=>h(s);return o(d.exports.Row,{children:[e(B,{placeholder:c("common.input.name.placeholder"),flexGrow:1,...y}),e(m,{spread:"tiny"}),e(G,{width:"130px",options:i,customLabel:S,...g}),e(m,{spread:"tiny"}),e(u,{borderRadius:"secondary",color:"secondary",onClick:C,boxShadow:"none",children:e(W,{})})]})},oe=()=>{const{t}=b(),{updateState:a,actions:s}=q(),p=async f=>{console.log(f),await new Promise(x=>{setTimeout(x,3e3)}),a(s.CHANGE_TO_ADD_INSTRUMENT)},h={accounts:[]},{register:c,handleSubmit:y,formState:{errors:g,isSubmitting:i,isValid:S,isDirty:C},control:n,getValues:N}=H({defaultValues:h,resolver:$(K),mode:"onChange"}),{fields:l,append:R,remove:P}=_({control:n,name:"accounts"}),U=N(),F=()=>R({name:"",currency:"USD"});return e(j.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:o(d.exports.Column,{children:[e(k,{textAlign:"center",children:t("add.cash.accounts.title")}),e(r,{space:"small"}),e(A,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",children:e(X,{i18nKey:"add.cash.accounts.description",components:{bold:e(A,{fontSize:"0.875",fontColor:"gray400",textAlign:"center",fontWeight:"700"})}})}),e(r,{space:"large"}),e("form",{onSubmit:y(p),noValidate:!0,children:o(d.exports.Column,{children:[l.length===0?e(I,{handleAppend:F}):null,e(Y,{children:l.map((f,x)=>e(ne,{index:x,register:c,errors:g,values:U,remove:P},f.id))}),e(r,{space:"tiny"}),l.length>0&&l.length<T?o(u,{color:"secondary",onClick:F,children:[t("add.cash.accounts.button.add")," ",e(m,{spread:"tiny"})," ",e(v,{})]}):null,e(r,{space:"large"}),e(u,{size:"large",type:"submit",disabled:i||!S||!C,width:"100%",children:i?e(M,{color:"white"}):t("add.cash.accounts.submit")})]})})]})})};oe.displayName="IntroductionAddCashAccountsForm";export{oe as AddCashAccountsForm};
